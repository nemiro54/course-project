@{
    ViewData["Title"] = "Item Page";
}

<div class="text-center">
    <h1 class="display-4">@Model.Name</h1>
</div>
<div id="loginBlock">
    Введите логин:<br/>
    <input id="userName" type="text"/>
    <input id="loginBtn" type="button" value="Login"/>
</div><br/>

<div id="header"></div><br/>

<div id="inputForm">
    <input type="text" id="message"/>
    <input type="button" id="sendBtn" value="Send"/>
</div>
<div id="chatroom"></div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/dropzone/5.9.3/dropzone.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/dropzone/5.9.3/dropzone.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/microsoft-signalr/6.0.1/signalr.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/microsoft-signalr/6.0.1/signalr.min.js"></script>
<script src="https://code.jquery.com/jquery-1.12.4.js" type="text/javascript"></script>
<script type="text/javascript">
        const hubConnection = new signalR.HubConnectionBuilder()
                    .withUrl("/Items")
                    .build();
         
                let userName = '';
                hubConnection.on('Send', function (message, userName) {
          
                    let userNameElem = document.createElement("b");
                    userNameElem.appendChild(document.createTextNode(userName + ': '));
          
                    let elem = document.createElement("p");
                    elem.appendChild(userNameElem);
                    elem.appendChild(document.createTextNode(message));
          
                    var firstElem = document.getElementById("chatroom").firstChild;
                    document.getElementById("chatroom").insertBefore(elem, firstElem);
          
                });
          
                document.getElementById("loginBtn").addEventListener("click", function (e) {
                    userName = document.getElementById("userName").value;
                    document.getElementById("header").innerHTML = '<h3>Welcome ' + userName + '</h3>';
                });
                document.getElementById("sendBtn").addEventListener("click", function (e) {
                    let message = document.getElementById("message").value;
                    hubConnection.invoke("Send", message, userName);
                });
         
                hubConnection.start();
    </script>